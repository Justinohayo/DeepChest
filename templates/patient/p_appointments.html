<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Patient Appointments - DeepChest</title>
    <link rel="stylesheet" href="/static/style.css" />
    <link rel="stylesheet" href="/static/patient.css" />
    <link rel="stylesheet" href="/static/logostyle.css" />
  </head>
  <body>
    <nav>
          <div class="logo">
        <a href="/patient_home"
          ><img
            src="{{ url_for('static', filename='logo_DeepChest.png') }}"
            class="logo-img"
        /></a>
        <div class="logo-text">DeepChest</div>
      </div>
      <div class="nav-links">
        <a href="/patient_home">Home</a>
        <a href="#">Appointments</a>
         <!--<a href="/patient/reports">My Reports</a> -->
        <a href="/patient/messages">Message</a>
        <a href="/patient/notifications">Notifications</a>
        <div class="dropdown">
          <button class="dropbtn">Account &#9662;</button>
          <div class="dropdown-content">
            <a href="/patient/account">Manage Account</a>
            <a href="/logout">Logout</a>
          </div>
        </div>
      </div>
    </nav>
    {# Show Flask flash messages (category used as CSS class) #}
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-container">
          {% for category, message in messages %}
            <div class="flash {{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <div class="patient-appointment-content">
      <h1>Your Appointments</h1>
      <div class="appointments-flex">
        <!-- Appointments List (Left) -->
        <div class="appointments-list-panel">
          <h3>Upcoming Appointments</h3>
          <form id="edit-appt-form" method="POST" action="/patient/edit-appointments">
            <ul class="appointments-list">
              {% if appointments %}
                {% for appt in appointments %}
                  <li>
                    <input type="radio" name="appointment_id" value="{{ appt.apptID }}" id="appt{{ appt.apptID }}" required>
                    <label for="appt{{ appt.apptID }}">
                      <strong>{{ appt.appointment_date }}</strong> {{ appt.appointment_time }}<br />
                      Doctor: {{ appt.doctorFirstName }} {{ appt.doctorLastName }}<br />
                      Symptoms: <span class="appt-notes">{{ appt.symptoms }}</span>
                    </label>
                  </li>
                {% endfor %}
              {% else %}
                <li>No appointments scheduled.</li>
              {% endif %}
            </ul>
          </form>
        </div>
        <!-- Actions (Right) -->
        <div class="appointments-actions-panel">
           <button class="appt-action-btn" onclick="document.getElementById('edit-appt-form').submit();">
            Edit Appointment
          </button>
          <button class="appt-action-btn" onclick="window.location.href='/patient/book-appointment'">
            Book New Appointment
          </button>
        </div>
      </div>
    </div>
  </body>
</html>
